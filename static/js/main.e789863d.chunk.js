(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{21:function(e,t,a){e.exports=a(32)},26:function(e,t,a){},32:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),l=a(19),r=a.n(l),i=(a(26),a(7)),o=a(1),s=a(6),m=a(13),u=a(9),d=function(e,t){switch(t.type){case"ADD_MOVIE_TO_WATCH_LIST":return Object(u.a)({},e,{watchlist:[t.payload].concat(Object(m.a)(e.watchlist))});case"REMOVE_MOVIE_TO_WATCH_LIST":return Object(u.a)({},e,{watchlist:e.watchlist.filter((function(e){return e.id!==t.payload}))});case"ADD_MOVIE_TO_WATCHED_LIST":return Object(u.a)({},e,{watchlist:e.watchlist.filter((function(e){return e.id!==t.payload.id})),watched:[t.payload].concat(Object(m.a)(e.watched))});case"MOVE_TO_WATCH_LIST":return Object(u.a)({},e,{watched:e.watched.filter((function(e){return e.id!==t.payload.id})),watchlist:[t.payload].concat(Object(m.a)(e.watchlist))});case"REMOVE_TO_WATCHED":return Object(u.a)({},e,{watched:e.watched.filter((function(e){return e.id!==t.payload}))});default:return e}},E={watchlist:localStorage.getItem("watchlist")?JSON.parse(localStorage.getItem("watchlist")):[],watched:localStorage.getItem("watched")?JSON.parse(localStorage.getItem("watched")):[]},p=Object(n.createContext)(E),h=function(e){var t=Object(n.useReducer)(d,E),a=Object(s.a)(t,2),l=a[0],r=a[1];Object(n.useEffect)((function(){localStorage.setItem("watchlist",JSON.stringify(l.watchlist)),localStorage.setItem("watched",JSON.stringify(l.watched))}),[l]);return c.a.createElement(p.Provider,{value:{watchlist:l.watchlist,watched:l.watched,addMovieToWatchList:function(e){r({type:"ADD_MOVIE_TO_WATCH_LIST",payload:e})},removeMovieToWatchList:function(e){r({type:"REMOVE_MOVIE_TO_WATCH_LIST",payload:e})},addMovieToWatched:function(e){r({type:"ADD_MOVIE_TO_WATCHED_LIST",payload:e})},movieToWatchList:function(e){r({type:"MOVE_TO_WATCH_LIST",payload:e})},removeToWatched:function(e){r({type:"REMOVE_TO_WATCHED",payload:e})}}},e.children)},v=function(){return c.a.createElement("header",null,c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"inner-content"},c.a.createElement("div",{className:"brand"},c.a.createElement(i.b,{to:"/"},"\u0421\u043f\u0438\u0441\u043e\u043a \u0444\u0438\u043b\u044c\u043c\u043e\u0432")),c.a.createElement("ul",{className:"nav-links"},c.a.createElement("li",null,c.a.createElement(i.b,{to:"/"},"\u0421\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u043f\u043e\u0437\u0436\u0435")),c.a.createElement("li",null,c.a.createElement(i.b,{to:"/watched"},"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u043d\u043d\u044b\u0435")),c.a.createElement("li",null,c.a.createElement(i.b,{to:"/add",className:"btn"},"\u041f\u043e\u0438\u0441\u043a"))))))},f=function(e){var t=e.movie,a=Object(n.useContext)(p),l=a.addMovieToWatchList,r=a.addMovieToWatched,i=a.watchlist,o=a.watched,s=i.find((function(e){return e.id===t.id})),m=o.find((function(e){return e.id===t.id})),u=!!s||!!m,d=!!m;return c.a.createElement("div",{className:"result-card"},c.a.createElement("div",{className:"poster-wrapper"},t.poster_path?c.a.createElement("img",{src:"https://image.tmdb.org/t/p/w200".concat(t.poster_path),alt:"".concat(t.title," Poster")}):c.a.createElement("div",{className:"filter-poster"})),c.a.createElement("div",{className:"info"},c.a.createElement("div",{className:"header"},c.a.createElement("h3",{className:"title"},t.title),c.a.createElement("h4",{className:"release-day"},t.release_date?t.release_date.substring(0,4):null,t.release_date?t.release_date.substring(0,4):"-")),c.a.createElement("div",{className:"controls"},c.a.createElement("button",{disabled:u,className:"btn",onClick:function(){l(t)}},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u0441\u043f\u0438\u0441\u043e\u043a"),c.a.createElement("button",{disabled:d,className:"btn",onClick:function(){r(t)}},"\u0412 \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u043d\u043d\u044b\u0435"))))},w=function(){var e=Object(n.useState)(""),t=Object(s.a)(e,2),a=t[0],l=t[1],r=Object(n.useState)([]),i=Object(s.a)(r,2),o=i[0],m=i[1];return console.log(o),c.a.createElement("div",{className:"add-page"},c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"add-content"},c.a.createElement("div",{className:"input-wrapper"},c.a.createElement("input",{type:"text",placeholder:"\u041f\u043e\u0438\u0441\u043a \u0444\u0438\u043b\u044c\u043c\u043e\u0432",onChange:function(e){e.preventDefault(),l(e.target.value),fetch(" https://api.themoviedb.org/3/search/movie?api_key=".concat("7dfa7d6095164b8b1cdb73c6047e2ab5","&language=ru-RU&page=1&include_adult=false&query=").concat(e.target.value)).then((function(e){return e.json()})).then((function(e){e.errors?m([]):m(e.results)}))},value:a}),o.length>0&&c.a.createElement("div",{className:"results"},o.map((function(e){return c.a.createElement("li",{key:e.id},c.a.createElement(f,{movie:e}))})))))))},b=function(e){var t=e.movie,a=e.type,l=Object(n.useContext)(p),r=l.removeMovieToWatchList,i=l.addMovieToWatched,o=l.movieToWatchList,s=l.removeToWatched;return c.a.createElement("div",{className:"inner-card-controls"},"watchlist"===a&&c.a.createElement(c.a.Fragment,null,c.a.createElement("button",{className:"ctrl-btn",onClick:function(){return function(){var e=window.confirm("\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0444\u0438\u043b\u044c\u043c \u0432 \u0441\u043f\u0438\u043e\u043a \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u043d\u043d\u044b\u0445?");return!0===e&&i(t),e}()}},c.a.createElement("i",{className:"fa-fw far fa-eye"})),c.a.createElement("button",{className:"ctrl-btn",onClick:function(){return function(){var e=window.confirm("\u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0444\u0438\u043b\u044c\u043c?");return!0===e&&r(t.id),e}()}},c.a.createElement("i",{className:"fa-fw fa fa-times"}))),"watched"===a&&c.a.createElement(c.a.Fragment,null,c.a.createElement("button",{className:"ctrl-btn",onClick:function(){return o(t)}},c.a.createElement("i",{className:"fa-fw far fa-eye-slash"})),c.a.createElement("button",{className:"ctrl-btn",onClick:function(){return s(t.id)}},c.a.createElement("i",{className:"fa-fw fa fa-times"}))))},g=function(e){var t=e.movie;return c.a.createElement("div",{className:"popup"},c.a.createElement("div",{className:"content"},c.a.createElement("div",{className:"img-popup"},t.poster_path?c.a.createElement("img",{src:"https://image.tmdb.org/t/p/w300".concat(t.poster_path),alt:"".concat(t.title," Poster")}):c.a.createElement("div",{className:"filter-poster"})),c.a.createElement("div",{className:"text-popup"},c.a.createElement("ul",null,c.a.createElement("li",null,"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435: ",c.a.createElement("span",null,t.title),c.a.createElement("br",null),c.a.createElement("small",null,t.original_title)),c.a.createElement("li",null,"\u0421\u0440\u0435\u0434\u043d\u044f\u044f \u043e\u0446\u0435\u043d\u043a\u0430: ",c.a.createElement("span",null,t.vote_average)),c.a.createElement("li",null,"\u0412\u044b\u0445\u043e\u0434: ",c.a.createElement("span",null,t.release_date.replace(/-/g,"."))),c.a.createElement("li",null,"\u041e\u0440\u0438\u0433\u0435\u043d\u0430\u043b\u044c\u043d\u044b\u0439 \u044f\u0437\u044b\u043a:",c.a.createElement("span",null,t.original_language.toUpperCase())),c.a.createElement("li",null,"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435:",c.a.createElement("span",null,t.overview))))))},N=function(e){var t=e.movie,a=e.type,l=Object(n.useState)(!1),r=Object(s.a)(l,2),i=r[0],o=r[1],m=c.a.createRef();return Object(n.useEffect)((function(){window.onclick=function(e){m.current&&(window.addEventListener("keydown",(function(e){27==e.keyCode&&o(!1)}),!0),e.target!==m.current&&o(!1))}}),[m]),c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"movie-card",ref:m,onClick:function(){o(!i)}},c.a.createElement("div",{className:"overlay"}),t.poster_path?c.a.createElement("img",{src:"https://image.tmdb.org/t/p/w200".concat(t.poster_path),alt:"".concat(t.title," Poster")}):c.a.createElement("div",{className:"filter-poster"}),c.a.createElement(b,{type:a,movie:t})),i?c.a.createElement(g,{movie:t}):null)},_=function(){var e=Object(n.useContext)(p).watchlist;return c.a.createElement("div",{className:"movie-page"},c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"header"},c.a.createElement("h1",{className:"heading"},"\u041c\u043e\u0439 \u0441\u043f\u0438\u0441\u043e\u043a")),e.length>0?c.a.createElement("div",{className:"movie-grid"},e.map((function(e,t){return c.a.createElement(N,{key:t,movie:e,type:"watchlist"})}))):c.a.createElement("h2",{className:"no-movies"},"\u041d\u0435\u0442 \u0444\u0438\u043b\u044c\u043c\u043e\u0432 \u0432 \u0441\u043f\u0438\u0441\u043a\u0435")))},O=function(){var e=Object(n.useContext)(p).watched;return c.a.createElement("div",{className:"movie-page"},c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"header"},c.a.createElement("h1",{className:"heading"},"watched movies")),e.length>0?c.a.createElement("div",{className:"movie-grid"},e.map((function(e,t){return c.a.createElement(N,{key:t,movie:e,type:"watched"})}))):c.a.createElement("h2",{className:"no-movies"},"\u041d\u0435\u0442 \u0444\u0438\u043b\u044c\u043c\u043e\u0432 \u0432 \u0441\u043f\u0438\u0441\u043a\u0435")))},y=function(){return c.a.createElement(h,null,c.a.createElement(i.a,null,c.a.createElement(v,null),c.a.createElement(o.c,null,c.a.createElement(o.a,{exact:!0,path:"/",component:_}),c.a.createElement(o.a,{path:"/watched",component:O}),c.a.createElement(o.a,{path:"/add",component:w}))))};r.a.render(c.a.createElement(y,null),document.getElementById("root"))}},[[21,1,2]]]);
//# sourceMappingURL=main.e789863d.chunk.js.map